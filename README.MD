# üöÄ ESP32 AirMouse

[üá¨üáß English version](./README_EN.md)

ESP32 AirMouse ‚Äî –ø—Ä–æ–µ–∫—Ç, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –±–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –∞—ç—Ä–æ–º—ã—à–∏.

---

## ‚öôÔ∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º—ã—à—å—é –ø–æ –¥–≤–∏–∂–µ–Ω–∏—è–º (–≥–∏—Ä–æ—Å–∫–æ–ø)  
‚úÖ IR-–ø—Ä–∏—ë–º–Ω–∏–∫ –∏ –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫ —Å —Ä–µ–∂–∏–º–æ–º –æ–±—É—á–µ–Ω–∏—è  
‚úÖ –ú–Ω–æ–≥–æ –∫–Ω–æ–ø–æ–∫ (–ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ MCP23017)  
‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–º—É–ª—å—Ç–∏–º–µ–¥–∏–∞, Android-–∫–ª–∞–≤–∏—à–∏)  
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞: –∫–ª–∏–∫, –¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫, —É–¥–µ—Ä–∂–∞–Ω–∏–µ, –∫–ª–∏–∫+—É–¥–µ—Ä–∂–∞–Ω–∏–µ  
‚úÖ BLE HID —Ä–µ–∂–∏–º (Bluetooth Low Energy)  
‚úÖ Wi-Fi –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (HTTP —Å–µ—Ä–≤–µ—Ä)  
‚úÖ –°–≤–µ—Ç–æ–¥–∏–æ–¥–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è WS2812  
‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏–µ–º IP5306 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)  
‚úÖ LittleFS (–±–∏–Ω–∞—Ä–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏)  
‚úÖ –°–ø—è—â–∏–π —Ä–µ–∂–∏–º –ø—Ä–∏ –±–µ–∑–¥–µ–π—Å—Ç–≤–∏–∏  
‚úÖ –°–ª–æ–∏ –¥–ª—è –∫–ª–∞–≤–∏—à  
‚úÖ –°–∫—Ä–∏–ø—Ç—ã (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏–π)

---

## üõ†Ô∏è –°—Ö–µ–º–∞ –ø—Ä–æ–µ–∫—Ç–∞

üîó [AirMouse –Ω–∞ EasyEDA](https://oshwlab.com/matuhinmax/air_mouse)

---

## üß© –û—Å–Ω–æ–≤–Ω—ã–µ —á–∏–ø—ã

| üéõÔ∏è –ö–æ–º–ø–æ–Ω–µ–Ω—Ç        | ‚ö° –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                                                           |
|---------------------|---------------------------------------------------------------------------------------|
| **ESP32**           | –ì–ª–∞–≤–Ω—ã–π –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä: BLE, Wi-Fi, –ø–µ—Ä–∏—Ñ–µ—Ä–∏—è, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º         |
| **MCP23017**        | I2C-—Ä–∞—Å—à–∏—Ä–∏—Ç–µ–ª—å –ø–æ—Ä—Ç–æ–≤ (2 —á–∏–ø–∞, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ –¥–æ 8)                                    |
| **IP5306**          | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏–µ–º: –∑–∞—Ä—è–¥–∫–∞, –∫–æ–Ω—Ç—Ä–æ–ª—å –±–∞—Ç–∞—Ä–µ–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)                           |
| **VS1838B + IR LED**| –ü—Ä–∏—ë–º –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –∏–Ω—Ñ—Ä–∞–∫—Ä–∞—Å–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤                                                 |
| **WS2812**          | –ê–¥—Ä–µ—Å–Ω—ã–µ —Å–≤–µ—Ç–æ–¥–∏–æ–¥—ã –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ –∏ –ø–æ–¥—Å–≤–µ—Ç–∫–∏                                            |

---

## üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

### I2C
- SDA: `GPIO4`
- SCL: `GPIO5`

### üì° IR
| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ   | –ü–∏–Ω      | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π      |
|---------------|----------|------------------|
| IR –ø—Ä–∏—ë–º–Ω–∏–∫  | `GPIO15` | VS1838B          |
| IR —Å–≤–µ—Ç–æ–¥–∏–æ–¥ | `GPIO14` | –ü–µ—Ä–µ–¥–∞—á–∞         |

### üñ±Ô∏è –ö–Ω–æ–ø–∫–∏ (–ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)
| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ  | –ü–∏–Ω      | –°—Ç–æ—Ä–æ–Ω–∞         |
|-------------|----------|------------------|
| Page Down   | `GPIO35` | –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞      |
| Page Up     | `GPIO34` | –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞      |
| Tab         | `GPIO17` | –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞      |
| Fn          | `GPIO0`  | –û–±–µ             |
| Tilt Wake   | `GPIO36` | –ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ –∏ –¥–∞—Ç—á–∏–∫ –¥–≤–∏–∂–µ–Ω–∏—è (—Ä—Ç—É—Ç–Ω—ã–π –¥–∞—Ç—á–∏–∫ –Ω–∞–∫–ª–æ–Ω–∞ 102) |

### üåà WS2812
| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ      | –ü–∏–Ω      | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π      |
|------------------|----------|------------------|
| –õ–µ–Ω—Ç–∞ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤| `GPIO12` | 32 —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞    |


---

## üü® MCP23017

1. —Å—Ç–æ—Ä–æ–Ω–∞ **–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞** ‚Äî `0x20`
2. —Å—Ç–æ—Ä–æ–Ω–∞ **–ú—ã—à—å** ‚Äî `0x21`
---

## üí° LED Status Table

| –°—Ç–∞—Ç—É—Å                         | –¶–≤–µ—Ç      | –≠—Ñ—Ñ–µ–∫—Ç            | –¢–∞–π–º–∞—É—Ç (–º—Å) | –ò—Å—Ç–æ—á–Ω–∏–∫ | –û–ø–∏—Å–∞–Ω–∏–µ            |
|--------------------------------|-----------|--------------------|--------------|----------|---------------------|
| BATTERY_CHARGING               | üîµ #0000FF| Fade (2 —Å–µ–∫)      | 0            | BATTERY  | –ó–∞—Ä—è–¥–∫–∞             |
| BATTERY_FULL                   | üü¢ #00FF00| -                 | 5000         | BATTERY  | –ü–æ–ª–Ω—ã–π –∑–∞—Ä—è–¥        |
| BATTERY_NEEDS_CHARGE           | üü° #FFFF00| Blink (500 –º—Å)    | 30000        | BATTERY  | –ù—É–∂–µ–Ω –∑–∞—Ä—è–¥         |
| BATTERY_LOW                    | üî¥ #FF0000| Blink (500 –º—Å)    | 0            | BATTERY  | –ù–∏–∑–∫–∏–π –∑–∞—Ä—è–¥        |
| NO_BLE_CONNECTION              | üîµ #3300EE| Fade (1 —Å–µ–∫)      | 0            | BLE      | BLE –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω    |
| BLE_CONNECTED                  | üü£ #4400FF| -                 | 5000         | BLE      | BLE –ø–æ–¥–∫–ª—é—á–µ–Ω       |
| WIFI_AP_START                  | üü† #FFA500| -                 | 3000         | WIFI     | Wi-Fi AP            |
| WIFI_CONNECTING                | üü° #FFFF00| Fade (1 —Å–µ–∫)      | 0            | WIFI     | –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Wi-Fi   |
| WIFI_CONNECTED                 | üîµ #00FFFF| -                 | 5000         | WIFI     | Wi-Fi –ø–æ–¥–∫–ª—é—á–µ–Ω     |
| IR_LEARN                       | üü£ #FF00FF| Blink (200 –º—Å)    | 0            | IR       | –û–±—É—á–µ–Ω–∏–µ IR         |
| IR_LEARN_END                   | üü£ #FF00FF| -                 | 5000         | IR       | –û–±—É—á–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ  |

---

### üîß –ò—Å—Ç–æ—á–Ω–∏–∫–∏ (`LED_SOURCE_*`)
–ö–∞–∂–¥—ã–π —Å—Ç–∞—Ç—É—Å –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —Å–≤–æ–µ–º—É **–∏—Å—Ç–æ—á–Ω–∏–∫—É**:

```cpp
#define LED_SOURCE_NONE    -1 (–Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫)
#define LED_SOURCE_BATTERY  0
#define LED_SOURCE_BLE      1
#define LED_SOURCE_WIFI     2
#define LED_SOURCE_IR       3
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

‚úÖ **–¢–∞–π–º–∞—É—Ç** ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —á–µ—Ä–µ–∑ —ç—Ç–æ –≤—Ä–µ–º—è —Å—Ç–∞—Ç—É—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–Ω–∏–º–∞–µ—Ç—Å—è –∏ –±—É–¥–µ—Ç –≤—ã–±—Ä–∞–Ω —Å–ª–µ–¥—É—é—â–∏–π –¥–æ—Å—Ç—É–ø–Ω—ã–π (–ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É –∏—Å—Ç–æ—á–Ω–∏–∫–∞).  
‚úÖ **Fade** ‚Äî –ø–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —è—Ä–∫–æ—Å—Ç–∏.  
‚úÖ **–ú–∏–≥–∞—é—â–∏–π** ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º (blink).  
‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤—ã–±–æ—Ä–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ª–æ–≥–∏–∫–æ–π: —Å–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ç—É—Å —Å —Ç–∞–π–º–∞—É—Ç–æ–º, –ø–æ—Ç–æ–º ‚Äî –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π.


## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ:
   ```bash
   git clone https://github.com/settler-mar/airmouse.git
  ```

2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `src/config.h`

3. –ü—Ä–æ—à–µ–π—Ç–µ –ø—Ä–æ—à–∏–≤–∫—É —á–µ—Ä–µ–∑ PlatformIO.

---

## üì∂ Wi-Fi Mode

–ü–µ—Ä–µ–π—Ç–∏ –≤ **—Ä–µ–∂–∏–º Wi-Fi** –º–æ–∂–Ω–æ, –Ω–∞–∑–Ω–∞—á–∏–≤ –µ–≥–æ –Ω–∞ –∫–Ω–æ–ø–∫—É (—á–µ—Ä–µ–∑ –¥–µ–π—Å—Ç–≤–∏—è) –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø–∏–Ω (`WIFI_MODE_RUN_PIN`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `GPIO17`).

- **–í—ã—Ö–æ–¥:**  
  –ß—Ç–æ–±—ã –≤—ã–π—Ç–∏ –∏–∑ —Ä–µ–∂–∏–º–∞ Wi-Fi, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∫–Ω–æ–ø–∫–æ–π —Å–±—Ä–æ—Å–∞.

- **AP —Ä–µ–∂–∏–º:**  
  –ï—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–µ—Ç–∏ –Ω–µ –∑–∞–¥–∞–Ω—ã –∏–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ —Å–º–æ–≥–ª–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–π —Å–µ—Ç–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 30 —Å–µ–∫—É–Ω–¥, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **—Ä–µ–∂–∏–º —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞ (AP)**.
